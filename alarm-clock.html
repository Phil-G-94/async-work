<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Alarm Clock</title>
</head>

<body>
	<button id="set-alarm">Set alarm</button>
	<div id="output"></div>

	<script>
		const output = document.querySelector('#output');
		const button = document.querySelector('#set-alarm');

		// using the setTimeout() API to implement our alarm() function. the API takes as arguments: 1) a callback function, 2) a delay given in milliseconds. 
		function setAlarm() {
			setTimeout(() => {
				output.textContent = "Wake the fuck up!";
			}, 1000);
		}

		button.addEventListener('click', setAlarm);



		// returns a Promise that is fulfilled when the timer expires. Takes in person to wake up and delay before message. 
		function alarm(person, delay) {
			// executor function, takes in resolve and reject functions as params. Calls the underlying asynchronous function. 
				// If the async function succeeds you call resolve. 
					// If it fails, you call reject. 
						// You can pass a single parameter of any type into resolve and reject. 
			return new Promise((resolve, reject) => {
				// checks that delay is not negative. throws an error if it is. 
				if (delay < 0) {
					throw new Error("Alarm delay must not be negative");
				}
					// calls setTimeout(), passing a callback to be called when the timer expires. 
						// in the callback we call resolve, passing in our "Wake up!" message.  
				setTimeout(() => {
					resolve(`Wake up, ${person}!`);
				}, delay);
			});
		}
	</script>

	<!-- stopped at using the Alarm API -->

</body>

</html>